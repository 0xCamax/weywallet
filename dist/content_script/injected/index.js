(()=>{async function p(){let s={active:!0,lastFocusedWindow:!0},[e]=await chrome.tabs.query(s);return e.id}var h=class{source;listeners;constructor(e){this.source=e,this.listeners=new Map,globalThis.addEventListener("message",this._internalHandler)}log(...e){console.log(`[${this.source}]`,...e)}listen=(e,r)=>{this.listeners.set(e,r)};unlisten=e=>{this.listeners.delete(e)};send=(e,r={},t,n="*",l={})=>{let i={__mailbox__:!0,type:e,payload:r,source:this.source,dest:t,...l};this.source==="DOM"||this.source==="CONTENT SCRIPT"&&t!=="BACKGROUND"?globalThis.postMessage(i,n):t==="CONTENT SCRIPT"&&this.source!=="DOM"?p().then(u=>chrome.tabs.sendMessage(u,i,()=>this.log(`${e} send`))):chrome.runtime.sendMessage(i)};_internalHandler=e=>{if(!e.data||e.data.__mailbox__!==!0||e.data.source===this.source||e.data.dest!==this.source)return;this.log("Message accepted");let r=this.listeners.get(e.data.type);typeof r=="function"&&r(e.data.payload,e)}};var g=class extends h{pending;handlers;constructor(e){super(e),this.source=e,this.pending=new Map,this.handlers=new Map,globalThis.addEventListener("message",this._onglobalThisMessage.bind(this)),(e==="CONTENT SCRIPT"||e==="BACKGROUND"||e==="EXTENSION")&&chrome.runtime.onMessage.addListener((r,t,n)=>this._onRuntimeMessage(r,t,n))}_onglobalThisMessage(e){if(e.data.source===this.source||!e.data?.__mailbox__)return;this.log(e);let{source:r,type:t,payload:n,dest:l,requestId:i}=e.data,{data:u}=n;if(!(r===this.source||l!==this.source)){if(t?.startsWith("RESPONSE_")&&this.pending.has(i)){let o=this.pending.get(i);o&&(o.resolve(u),this.pending.delete(i));return}if(t?.startsWith("REQUEST_")){let o=t.replace("REQUEST_",""),a=this.handlers.get(o);if(!a){this.log(`No handler for request: ${o}`);return}Promise.resolve(a(n,e)).then(d=>{this.send(`RESPONSE_${t}`,d,"DOM","*",{requestId:i})})}if(t?.startsWith("NOTIFY_")){let o=t.replace("NOTIFY_",""),a=this.handlers.get(o);if(!a){this.log("No handler for this");return}a(n,o)}}}_onRuntimeMessage(e,r,t){if(!e?.__mailbox__||e.dest!==this.source)return this.log("Ignored runtime message"),!1;let{type:n,requestId:l,payload:i}=e;if(n?.startsWith("REQUEST_")){let u=n.replace("REQUEST_",""),o=this.handlers.get(u);if(!o)return t({ok:!1,error:`No handler for ${u}`}),!1;try{let a=o(i,r,t);return a&&typeof a.then=="function"?(a.then(d=>{this.log("Handler resolved with:",d),t({__mailbox__:!0,source:this.source,dest:e.source,requestId:l,type:`RESPONSE_${u}`,payload:d,ok:!0})}).catch(d=>{this.log("Handler rejected with:",d.message),t({ok:!1,error:d?.message||String(d)})}),!0):!1}catch(a){let d=a;return t({ok:!1,error:d?.message||String(d)}),!1}}return n?.startsWith("NOTIFY_")&&this.source==="CONTENT SCRIPT"?(this.send(n,i,"DOM"),!1):!0}request(e,r,t){let n=r?.method+"_"+crypto.randomUUID();return new Promise(l=>{this.pending.set(n,{resolve:l});let i={__mailbox__:!0,type:`REQUEST_${e}`,payload:r,requestId:n,source:this.source,dest:t};t==="BACKGROUND"||t==="EXTENSION"?chrome.runtime.sendMessage(i,u=>{if(chrome.runtime.lastError){console.error("No extension page open:",chrome.runtime.lastError.message);return}let o=this.pending.get(n);o&&(o.resolve(u),this.pending.delete(n))}):this.send(`REQUEST_${e}`,r,t,"*",{requestId:n})})}on(e,r){this.handlers.set(e,r),this.log("Registered handler for",e)}off(e){this.handlers.delete(e),this.log("Removed handler for",e)}};var c=new g("DOM");window.ethereum?(window.ethereum.isWeyWallet=!0,window.ethereum.weyWalletProvider={...c,request:s=>c.request("WALLET",{method:s.method,params:s.params},"CONTENT SCRIPT"),on:(s,e)=>c.on(s,e),removeListener:s=>c.off(s)}):window.ethereum={isWeyWallet:!0,...c,request:s=>c.request("WALLET",{method:s.method,params:s.params},"CONTENT SCRIPT"),on:(s,e)=>c.on(s,e),removeListener:s=>c.off(s)};var E=`data:image/png;base64,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`;var M={name:"weywallet",icon:E,rdns:"com.weywallet.io",uuid:crypto.randomUUID()},S="pholcajgphdggelomgfejfmmjdkilgld";var T={ANNOUNCE_PROVIDER:"eip6963:announceProvider",WALLET_CONNECTED:"connect",WALLET_DISCONNECTED:"disconnect",CHAIN_CHANGED:"chainChanged",ACCOUNT_CHANGED:"accountsChanged",ERROR:"error"};var m={PROVIDER:"eip6963:requestProvider",ACCOUNTS:"eth_accounts",ACCOUNTS2:"eth_requestAccounts",UPGRADE:"upgrade",RSA_SIGN:"rsa_signatureRequest",ECDSA_SIGN:"ecdsa_signatureRequest",ETH_SIGN:"eth_sign",ETH_SEND:"eth_sendTransaction",PERSONAL_SIGN:"personal_sign",SIGN_TYPED_V1:"eth_signTypedData_v1",SIGN_TYPED_V3:"eth_signTypedData_v3",SIGN_TYPED_V4:"eth_signTypedData_v4",SEND_RAW_TX:"eth_sendRawTransaction",ACTION:"model_action"};var f=async()=>{let s=globalThis.ethereum.weyWalletProvider??globalThis.ethereum,e=await s.request({method:m.PROVIDER});return globalThis.dispatchEvent(new CustomEvent(T.ANNOUNCE_PROVIDER,{detail:{info:e,provider:s,extensionId:S}}))};globalThis.addEventListener(m.PROVIDER,f);f();})();
